a = {
    a = 1
    this
}

f = () -> {
    b = a

    this
}

assert(a.a, 1)

assert(f().b.a, 1) /* 1 */

constructor = (initialA) -> {
    a = initialA
    self = this

    setA = (value) -> {
        self.a = value
    }

    b = {
        c = 1

        this
    }

    this
}

object = constructor(1)

object.setA(2)

assert(object.a, 2)

object.a = 3

assert(object.a, 3)

assert(object.b.c, 1)

object.b.c = 4

assert(object.b.c, 4)